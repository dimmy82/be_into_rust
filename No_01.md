# rustにハマる巻01  

## rustはどんな言語  

  高速かつ安全、多くの設計＆実装ミスなど潜在的なバグはコンパイル時点で検知してくれる言語です。
  
## メモリの管理仕組み

  - 手動でallocate/free （C、、、他は全然思い付かない）
    - バグ無しで実装することはスーパーエンジニアしかできない
      - freeし忘れたら、memory leak
      - freeが早かったら、予期せぬエラー
      - freeがダブったら、予期せぬエラー
  - garbage collection （Jvm系、Haskellなど）
    - 手抜き、めっちゃ楽
    - Full GCが発生したら再起動しかない
  - 自動的にスコープから外れたら直ちに解放 （**rust**、C++ RAII patterns）

## rustのメモリ管理

```rust
{                      　　　　　　　  // スコープ開始
    let s1 = String::from("hello");  // s1が生成された（メモリ確保された）
    // s1が「hello」という文字列を所有している
    // s1は使える
}                                    // スコープ終了、s1が無効になる（メモリ解放された）
```

#### メモリは用途によって２種類に分けられる

| ＼ | Stack | Heap |
|:---|:---|:---|
|アクセス方法 |FILO |一定な領域が確保できる任意な場所 |
|格納対象 |サイズ固定なデータ |サイズ変動可能なデータ |
|-------- | - 全ての整数型（i32, u32など） | - サイズ固定以外のデータ（Stringなど） |
|-------- | - 全ての小数型（f64など） |-------- |
|-------- | - bool, char |-------- |
|-------- | - 上記タイプを含むTuple：(i32, bool) |-------- |

#### 実際メモリに格納したイメージ

<img src="https://doc.rust-lang.org/book/img/trpl04-01.svg" width="50%">
